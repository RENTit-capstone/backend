= RENTit API Docs
Harseal API 문서
:doctype: book
:icons: font
:source-highlighter: highlightjs
:toc: left
:toclevels: 2
:sectlinks:
:snippets: ../build/generated-snippets  // 스니펫 파일이 위치한 경로 (환경에 맞게 조정)

== API 기본 응답 형식
모든 API 응답은 아래와 같은 JSON 형식을 따릅니다:

[source,json]
----
{
  "success": API 성공 여부(true, false),
  "data": <요청에 따라 달라짐>,
  "message": "성공시 빈 문자열, 실패시 에러 메시지"
}
----

== 회원가입 API

=== 회원 가입
operation::register-member-success[snippets='request-fields,http-request,response-fields,http-response']

=== 이메일 인증 요청
operation::verify-email-success[snippets='request-fields,http-request,response-fields,http-response']

=== 인증 코드 검증 요청
operation::verify-code-success[snippets='request-fields,http-request,response-fields,http-response']

== 로그인 API

=== 로그인 요청
operation::login_success[snippets='request-fields,http-request,response-fields,http-response']

== 회원 관련 API (MemberController 기준)

이 섹션은 MemberControllerTest에 기반한 최신 API 문서입니다. 아래 스니펫 파일들을 활용해 각 엔드포인트에 대한 요청/응답 정보를 자동으로 포함합니다.

=== 1. 회원 생성 API
==== POST /api/v1/admin/members
새로운 회원(학생)을 생성합니다.

===== 요청 필드
include::{snippets}/admin-create-member-success/request-fields.adoc[]

===== 응답 필드
include::{snippets}/admin-create-member-success/response-fields.adoc[]

===== API 설명
전달받은 학생 회원 생성 정보를 기반으로 회원을 생성하고, 생성된 회원의 ID를 응답 데이터로 반환합니다.

=== 2. 전체 회원 조회 API
==== GET /api/v1/admin/members
전체 회원 목록을 조회합니다.

===== 응답 필드
include::{snippets}/get-all-members/response-fields.adoc[]

===== API 설명
조회된 전체 회원 목록(각 회원의 ID, 이메일, 이름 및 기타 정보 포함)을 반환합니다.

=== 3. 회원 단건 조회 API
==== GET /api/v1/members/{id}
특정 회원의 상세 정보를 조회합니다.

===== URL 파라미터
* `{id}`: 조회할 회원의 ID

===== 응답 필드
include::{snippets}/get-member/response-fields.adoc[]

===== API 설명
회원의 ID를 경로 변수로 전달하여 해당 회원의 상세 정보를 반환합니다.

=== 4. 회원 정보 수정 API
==== PUT /api/v1/members/{id}
회원 정보를 업데이트합니다.

===== URL 파라미터
* `{id}`: 수정할 회원의 ID

===== 요청 필드
include::{snippets}/update-member/request-fields.adoc[]

===== 응답 필드
include::{snippets}/update-member/response-fields.adoc[]

===== API 설명
회원의 ID와 함께 업데이트할 내용을 JSON으로 전달하면, 해당 회원 정보가 수정되고 수정된 회원의 ID가 반환됩니다.

=== 5. 회원 삭제 API
==== DELETE /api/v1/admin/members/{id}
특정 회원을 삭제합니다.

===== URL 파라미터
* `{id}`: 삭제할 회원의 ID

===== 응답 필드
include::{snippets}/delete-member/response-fields.adoc[]

===== API 설명
회원의 ID를 전달하여 해당 회원을 삭제하며, 삭제된 회원의 ID를 응답 데이터로 반환합니다.

=== 6. 로그인 회원 조회 API
==== GET /api/v1/members/me
현재 로그인한 회원의 정보를 조회합니다.

===== 응답 필드
include::{snippets}/get-login-member/response-fields.adoc[]

===== API 설명
Spring Security와 커스텀 인자 리졸버(`@Login`)를 통해 SecurityContext에 등록된 회원 정보를 기반으로 현재 로그인한 회원의 상세 정보를 반환합니다.

== (추가) MemberControllerTest 기반 API 문서

아래는 MemberControllerTest에 기반하여 작성한 API 문서 상세 설명입니다.

[cols="1,3", options="header"]
|===
| **엔드포인트** | **설명**

| POST /api/v1/admin/members
| 신규 회원(학생)을 생성합니다. 요청 바디에 학생 정보를 JSON 형식으로 전달하며, 생성된 회원의 ID를 반환합니다.

| GET /api/v1/admin/members
| 전체 회원 목록을 조회하며, 각 회원에 대해 ID, 이메일, 이름, 역할, 프로필 이미지, 등록일 등의 정보를 반환합니다.

| GET /api/v1/members/{id}
| 특정 회원의 상세 정보를 조회합니다. URL 경로의 `{id}` 값으로 회원의 ID를 전달합니다.

| PUT /api/v1/members/{id}
| 회원 정보를 업데이트합니다. 요청 본문에 업데이트할 내용을 포함하며, 업데이트된 회원의 ID를 반환합니다.

| DELETE /api/v1/admin/members/{id}
| 특정 회원을 삭제하며, 삭제된 회원의 ID를 반환합니다.

| GET /api/v1/members/me
| 현재 로그인한 회원의 정보를 반환합니다. SecurityContext에 등록된 인증 정보를 사용하여 회원 정보를 제공하며, `@Login` 애노테이션과 커스텀 리졸버가 이를 지원합니다.
|===

== 변경 이력
* 2025-04-16: 기본 API 문서에서 스니펫 파일 기반 문서로 수정
* 2025-04-16: MemberControllerTest 기반 API 문서 추가 (기존 index.adoc 뒤에 추가)
